<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Record your environments in Kosli # Recording the status of runtime environments it's one of the fundamental features of Kosli. Our CLI detects artifacts running in given environment and reports the information to Kosli.
If the list of running artifacts is different than what was reported previously a new snapshot is created. Snapshots are immutable and can't be tampered with.
There is range of kosli environment report [...] commands, allowing you to report a variety of environments."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:image" content="https://docs.kosli.com/images/kosli.jpg"><meta name=twitter:image content="https://docs.kosli.com/images/kosli.jpg"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://docs.kosli.com/how_to/record/"><title>Record</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=stylesheet href=/book.min.c5f8a19643c6764113dc90f2dcf254a8aa166f772dc327424e7d84de5c9f2be5.css integrity="sha256-xfihlkPGdkET3JDy3PJUqKoWb3ctwydCTn2E3lyfK+U=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.3ce42f977b6be2d4ea79692d5810cded89c82ea83d5f1e45fe3115bd5e0e68f4.js integrity="sha256-POQvl3tr4tTqeWktWBDN7YnILqg9Xx5F/jEVvV4OaPQ=" crossorigin=anonymous></script>
<script src=https://cdn.usefathom.com/script.js data-site=AUFUAQWT data-excluded-domains=localhost defer></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Kosli developer documentation</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-8d07877860004719ef46751318e056d1 class=toggle>
<label for=section-8d07877860004719ef46751318e056d1 class="flex justify-between"><a href=https://docs.kosli.com/introducing_kosli/>Introducing Kosli</a></label><ul><li><a href=https://docs.kosli.com/introducing_kosli/organizations/>Organizations</a></li><li><a href=https://docs.kosli.com/introducing_kosli/environments/>Environments</a></li><li><a href=https://docs.kosli.com/introducing_kosli/pipelines/>Pipelines</a></li><li><a href=https://docs.kosli.com/introducing_kosli/fingerprint/>Fingerprint</a></li><li><a href=https://docs.kosli.com/introducing_kosli/cli/>CLI</a></li><li><a href=https://docs.kosli.com/introducing_kosli/web_ui/>Web UI</a></li></ul></li><li><input type=checkbox id=section-acdc30ff5cf57e4ff3a5b04fe43650db class=toggle>
<label for=section-acdc30ff5cf57e4ff3a5b04fe43650db class="flex justify-between"><a href=https://docs.kosli.com/getting_started/>Getting started</a></label><ul><li><a href=https://docs.kosli.com/getting_started/getting_started_with_kosli/>Getting started with Kosli</a></li><li><a href=https://docs.kosli.com/getting_started/installation/>Install Kosli</a></li><li><a href=https://docs.kosli.com/getting_started/use_kosli_in_ci_systems/>Use Kosli in CI Systems</a></li></ul></li><li><input type=checkbox id=section-fdba2124b9f6bc01f478608f07a6e592 class=toggle>
<label for=section-fdba2124b9f6bc01f478608f07a6e592 class="flex justify-between"><a href=https://docs.kosli.com/use_cases/>Use cases</a></label><ul><li><a href=https://docs.kosli.com/use_cases/following_a_git_commit_to_runtime_environments/>Following a git commit to runtime environments</a><ul></ul></li><li><a href=https://docs.kosli.com/use_cases/tracing_a_production_incident_back_to_git_commits/>Tracing a production incident back to git commits</a><ul></ul></li><li><a href=https://docs.kosli.com/use_cases/simulating_a_devops_system/>Simulating a DevOps system</a><ul></ul></li></ul></li><li><input type=checkbox id=section-23c01066495116db89ec68655dfc73ed class=toggle checked>
<label for=section-23c01066495116db89ec68655dfc73ed class="flex justify-between"><a href=https://docs.kosli.com/how_to/>How to</a></label><ul><li><a href=https://docs.kosli.com/how_to/record/ class=active>Record</a></li><li><a href=https://docs.kosli.com/how_to/connect/>Connect</a></li><li><a href=https://docs.kosli.com/how_to/search/>Search</a></li></ul></li><li><input type=checkbox id=section-3993beb65ef7e76a7dbe6e66c07255ac class=toggle>
<label for=section-3993beb65ef7e76a7dbe6e66c07255ac class="flex justify-between"><a href=https://docs.kosli.com/client_reference/>Reference</a></label><ul><li><a href=https://docs.kosli.com/client_reference/kosli/>kosli</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_approval_get/>kosli approval get</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_approval_ls/>kosli approval ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_artifact_get/>kosli artifact get</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_artifact_ls/>kosli artifact ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_artifact/>kosli assert artifact</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_bitbucket-pullrequest/>kosli assert bitbucket-pullrequest</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_environment/>kosli assert environment</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_github-pullrequest/>kosli assert github-pullrequest</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_status/>kosli assert status</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_completion/>kosli completion</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_deployment_get/>kosli deployment get</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_deployment_ls/>kosli deployment ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_allowedartifacts_add/>kosli environment allowedartifacts add</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_declare/>kosli environment declare</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_diff/>kosli environment diff</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_get/>kosli environment get</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_inspect/>kosli environment inspect</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_log/>kosli environment log</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_ls/>kosli environment ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_docker/>kosli environment report docker</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_ecs/>kosli environment report ecs</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_k8s/>kosli environment report k8s</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_lambda/>kosli environment report lambda</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_s3/>kosli environment report s3</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_server/>kosli environment report server</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_expect_deployment/>kosli expect deployment</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_fingerprint/>kosli fingerprint</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_approval_assert/>kosli pipeline approval assert</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_approval_report/>kosli pipeline approval report</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_approval_request/>kosli pipeline approval request</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_creation/>kosli pipeline artifact report creation</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_evidence_bitbucket-pullrequest/>kosli pipeline artifact report evidence bitbucket-pullrequest</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_evidence_generic/>kosli pipeline artifact report evidence generic</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_evidence_github-pullrequest/>kosli pipeline artifact report evidence github-pullrequest</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_evidence_test/>kosli pipeline artifact report evidence test</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_declare/>kosli pipeline declare</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_inspect/>kosli pipeline inspect</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_ls/>kosli pipeline ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_status/>kosli status</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_version/>kosli version</a></li></ul></li><li><input type=checkbox id=section-d06928ff9c11121b26f141ced850796c class=toggle>
<label for=section-d06928ff9c11121b26f141ced850796c class="flex justify-between"><a href=https://docs.kosli.com/helm/>Helm</a></label><ul><li><a href=https://docs.kosli.com/helm/helm_chart/>Helm Chart</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Record</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#record-your-environments-in-kosli>Record your environments in Kosli</a><ul><li><a href=#record-docker-environment>Record docker environment</a></li><li><a href=#record-ecs-environment>Record ecs environment</a></li><li><a href=#record-k8s-environment>Record k8s environment</a></li><li><a href=#record-lambda-environment>Record lambda environment</a></li><li><a href=#record-s3-environment>Record s3 environment</a></li><li><a href=#record-server-environment>Record server environment</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=record-your-environments-in-kosli>Record your environments in Kosli
<a class=anchor href=#record-your-environments-in-kosli>#</a></h1><p>Recording the status of runtime environments it's one of the fundamental features of Kosli. Our CLI detects artifacts running in given environment and reports the information to Kosli.</p><p>If the list of running artifacts is different than what was reported previously a new snapshot is created. Snapshots are immutable and can't be tampered with.</p><p>There is range of <code>kosli environment report [...]</code> commands, allowing you to report a variety of environments. To record a current status of your environment you simply run on of them. You can do it manually but typically recording commands would run automatically, e.g. via a cron job or scheduled CI job.</p><h2 id=record-docker-environment>Record docker environment
<a class=anchor href=#record-docker-environment>#</a></h2><p>Run <code>kosli environment report docker</code> to report running containers data from docker host to Kosli.<br>The command has to be run on the actual docker host, to be able to detect running containers.</p><h3 id=example>Example
<a class=anchor href=#example>#</a></h3><pre tabindex=0><code>kosli environment report docker yourEnvironmentName \
	--api-token yourAPIToken \r
	--owner yourOrgName
</code></pre><p>Details <a href=/client_reference/kosli_environment_report_docker/>here</a></p><h2 id=record-ecs-environment>Record ecs environment
<a class=anchor href=#record-ecs-environment>#</a></h2><p>Run <code>kosli environment report ecs</code> to report images data from AWS ECS cluster to Kosli.<br>The command requires following environment variables to be set, to be able to connect to AWS:</p><ul><li><code>AWS_REGION</code></li><li><code>AWS_ACCESS_KEY_ID</code></li><li><code>AWS_SECRET_ACCESS_KEY</code></li></ul><h3 id=example-1>Example
<a class=anchor href=#example-1>#</a></h3><pre tabindex=0><code>export AWS_REGION=yourAWSRegion
export AWS_ACCESS_KEY_ID=yourAWSAccessKeyID
export AWS_SECRET_ACCESS_KEY=yourAWSSecretAccessKey

kosli environment report ecs yourEnvironmentName \
	--api-token yourAPIToken \
	--owner yourOrgName
</code></pre><p>Details <a href=/client_reference/kosli_environment_report_ecs/>here</a></p><h2 id=record-k8s-environment>Record k8s environment
<a class=anchor href=#record-k8s-environment>#</a></h2><p>Run <code>kosli environment report k8s</code> to report images data from specific namespace(s) or entire cluster to Kosli.<br>The command can be run anywhere and requires <code>kubeconfig</code> to be able to connect to the cluster (you can skip providing the location of <code>kubeconfig</code> if it resides in default <code>$HOME/.kube/config</code> folder).</p><h3 id=example-2>Example
<a class=anchor href=#example-2>#</a></h3><pre tabindex=0><code># report what is running in an entire cluster using kubeconfig at $HOME/.kube/config:
kosli environment report k8s yourEnvironmentName \
	--api-token yourAPIToken \
	--owner yourOrgName

# report what is running in a given namespace using kubeconfig at a custom path:
kosli environment report k8s yourEnvironmentName \
	--kubeconfig /path/to/kubeconfig \
	--namespace your-namespace \
	--api-token yourAPIToken \
	--owner yourOrgName
</code></pre><p>Details <a href=/client_reference/kosli_environment_report_k8s/>here</a></p><h2 id=record-lambda-environment>Record lambda environment
<a class=anchor href=#record-lambda-environment>#</a></h2><p>Run <code>kosli environment report lambda</code> to report artifact from AWS Lambda to Kosli.<br>You can use either flags or environment variables to provide AWS secrets.</p><h3 id=example-3>Example
<a class=anchor href=#example-3>#</a></h3><pre tabindex=0><code># report what is running in the latest version AWS Lambda function (AWS auth provided in env variables):
export AWS_REGION=yourAWSRegion
export AWS_ACCESS_KEY_ID=yourAWSAccessKeyID
export AWS_SECRET_ACCESS_KEY=yourAWSSecretAccessKey

kosli environment report lambda myEnvironment \
	--function-name yourFunctionName \
	--api-token yourAPIToken \
	--owner yourOrgName

# report what is running in a specific version of an AWS Lambda function (AWS auth provided in flags):
kosli environment report lambda myEnvironment \
	--function-name yourFunctionName \
	--function-version yourFunctionVersion \
	--aws-key-id yourAWSAccessKeyID \
	--aws-secret-key yourAWSSecretAccessKey \
	--aws-region yourAWSRegion \
	--api-token yourAPIToken \
	--owner yourOrgName
</code></pre><p>Details <a href=/client_reference/kosli_environment_report_lambda/>here</a></p><h2 id=record-s3-environment>Record s3 environment
<a class=anchor href=#record-s3-environment>#</a></h2><p>Run <code>kosli environment report s3</code> to report artifact from AWS S3 bucket to Kosli.<br>You can use either flags or environment variables to provide AWS secrets.</p><h3 id=example-4>Example
<a class=anchor href=#example-4>#</a></h3><pre tabindex=0><code># report what is running in an AWS S3 bucket (AWS auth provided in env variables):
export AWS_REGION=yourAWSRegion
export AWS_ACCESS_KEY_ID=yourAWSAccessKeyID
export AWS_SECRET_ACCESS_KEY=yourAWSSecretAccessKey

kosli environment report s3 yourEnvironmentName \
	--bucket yourBucketName \
	--api-token yourAPIToken \
	--owner yourOrgName

# report what is running in an AWS S3 bucket (AWS auth provided in flags):
kosli environment report s3 yourEnvironmentName \
	--bucket yourBucketName \
	--aws-key-id yourAWSAccessKeyID \
	--aws-secret-key yourAWSSecretAccessKey \
	--aws-region yourAWSRegion \
	--api-token yourAPIToken \
	--owner yourOrgName
</code></pre><p>Details <a href=/client_reference/kosli_environment_report_s3/>here</a></p><h2 id=record-server-environment>Record server environment
<a class=anchor href=#record-server-environment>#</a></h2><p>Run <code>kosli environment report server</code> to report directory or file artifacts data in the given list of paths to Kosli.<br>The command has to be run on the actual server (physical or vm), to be able to detect artifacts.</p><p>Use <code>--paths</code> flag to provide a comma separated list of directories and files you want to be reported. Keep in mind that each directory will be treated as a single artifact and in order to make sure they are correctly identified in Kosli they should also be reported as a single artifact.</p><h3 id=example-5>Example
<a class=anchor href=#example-5>#</a></h3><pre tabindex=0><code>kosli environment report server yourEnvironmentName \
	--paths a/b/c, e/f/g \
	--api-token yourAPIToken \
	--owner yourOrgName
</code></pre><p>Details <a href=/client_reference/kosli_environment_report_server/>here</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){document.querySelectorAll("div.command").forEach(e=>{let t=document.createElement("div"),n=document.createTextNode("copied!");t.appendChild(n),e.appendChild(t),t.classList.add("copiedText"),e.addEventListener("click",function(){if(navigator.clipboard){let n=e.querySelector("code");navigator.clipboard.writeText(n.innerText),t.classList.add("visible"),setTimeout(()=>{t.classList.remove("visible")},1500)}})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#record-your-environments-in-kosli>Record your environments in Kosli</a><ul><li><a href=#record-docker-environment>Record docker environment</a></li><li><a href=#record-ecs-environment>Record ecs environment</a></li><li><a href=#record-k8s-environment>Record k8s environment</a></li><li><a href=#record-lambda-environment>Record lambda environment</a></li><li><a href=#record-s3-environment>Record s3 environment</a></li><li><a href=#record-server-environment>Record server environment</a></li></ul></li></ul></nav></div></aside></main><div class=top-header><div class="container flex"><div class=docs-logo><a href=/><img src=/kosli-docs-logo-white.svg alt="Kosli docs logo"></a></div><div class=separator></div></div></div></body></html>