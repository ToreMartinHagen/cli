<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Getting started with Kosli # A typical use of Kosli follows a scenario:
Record the state of your runtime environments Connect the data from you pipelines Search in Kosli to get the whole picture We'll be using Kosli CLI to run all the commands. You can find installation instruction here .
In the examples below we report k8s type of environment but the general approach would work for any supported type."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:image" content="https://docs.kosli.com/images/kosli.jpg"><meta name=twitter:image content="https://docs.kosli.com/images/kosli.jpg"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://docs.kosli.com/getting_started/getting_started_with_kosli/"><title>Getting started with Kosli</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=stylesheet href=/book.min.c5f8a19643c6764113dc90f2dcf254a8aa166f772dc327424e7d84de5c9f2be5.css integrity="sha256-xfihlkPGdkET3JDy3PJUqKoWb3ctwydCTn2E3lyfK+U=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.2430863868b9c7373ba361ec08be81acf447b840d5a7b10374eedea8b5e4f113.js integrity="sha256-JDCGOGi5xzc7o2HsCL6BrPRHuEDVp7EDdO7eqLXk8RM=" crossorigin=anonymous></script>
<script src=https://cdn.usefathom.com/script.js data-site=AUFUAQWT data-excluded-domains=localhost defer></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Kosli developer documentation</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-8d07877860004719ef46751318e056d1 class=toggle>
<label for=section-8d07877860004719ef46751318e056d1 class="flex justify-between"><a href=https://docs.kosli.com/introducing_kosli/>Introducing Kosli</a></label><ul><li><a href=https://docs.kosli.com/introducing_kosli/organizations/>Organizations</a></li><li><a href=https://docs.kosli.com/introducing_kosli/environments/>Environments</a></li><li><a href=https://docs.kosli.com/introducing_kosli/pipelines/>Pipelines</a></li><li><a href=https://docs.kosli.com/introducing_kosli/fingerprint/>Fingerprint</a></li><li><a href=https://docs.kosli.com/introducing_kosli/cli/>CLI</a></li><li><a href=https://docs.kosli.com/introducing_kosli/web_ui/>Web UI</a></li></ul></li><li><input type=checkbox id=section-acdc30ff5cf57e4ff3a5b04fe43650db class=toggle checked>
<label for=section-acdc30ff5cf57e4ff3a5b04fe43650db class="flex justify-between"><a href=https://docs.kosli.com/getting_started/>Getting started</a></label><ul><li><a href=https://docs.kosli.com/getting_started/getting_started_with_kosli/ class=active>Getting started with Kosli</a></li><li><a href=https://docs.kosli.com/getting_started/installation/>Install Kosli</a></li><li><a href=https://docs.kosli.com/getting_started/use_kosli_in_ci_systems/>Use Kosli in CI Systems</a></li></ul></li><li><input type=checkbox id=section-fdba2124b9f6bc01f478608f07a6e592 class=toggle>
<label for=section-fdba2124b9f6bc01f478608f07a6e592 class="flex justify-between"><a href=https://docs.kosli.com/use_cases/>Use cases</a></label><ul><li><a href=https://docs.kosli.com/use_cases/following_a_git_commit_to_runtime_environments/>Following a git commit to runtime environments</a><ul></ul></li><li><a href=https://docs.kosli.com/use_cases/tracing_a_production_incident_back_to_git_commits/>Tracing a production incident back to git commits</a><ul></ul></li><li><a href=https://docs.kosli.com/use_cases/simulating_a_devops_system/>Simulating a DevOps system</a><ul></ul></li></ul></li><li><input type=checkbox id=section-23c01066495116db89ec68655dfc73ed class=toggle>
<label for=section-23c01066495116db89ec68655dfc73ed class="flex justify-between"><a href=https://docs.kosli.com/how_to/>How to</a></label><ul><li><a href=https://docs.kosli.com/how_to/record/>Record</a></li><li><a href=https://docs.kosli.com/how_to/connect/>Connect</a></li><li><a href=https://docs.kosli.com/how_to/search/>Search</a></li></ul></li><li><input type=checkbox id=section-3993beb65ef7e76a7dbe6e66c07255ac class=toggle>
<label for=section-3993beb65ef7e76a7dbe6e66c07255ac class="flex justify-between"><a href=https://docs.kosli.com/client_reference/>Reference</a></label><ul><li><a href=https://docs.kosli.com/client_reference/kosli/>kosli</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_approval_get/>kosli approval get</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_approval_ls/>kosli approval ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_artifact_get/>kosli artifact get</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_artifact_ls/>kosli artifact ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_artifact/>kosli assert artifact</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_bitbucket-pullrequest/>kosli assert bitbucket-pullrequest</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_environment/>kosli assert environment</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_github-pullrequest/>kosli assert github-pullrequest</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_assert_status/>kosli assert status</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_completion/>kosli completion</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_deployment_get/>kosli deployment get</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_deployment_ls/>kosli deployment ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_allowedartifacts_add/>kosli environment allowedartifacts add</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_declare/>kosli environment declare</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_diff/>kosli environment diff</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_get/>kosli environment get</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_inspect/>kosli environment inspect</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_log/>kosli environment log</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_ls/>kosli environment ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_docker/>kosli environment report docker</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_ecs/>kosli environment report ecs</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_k8s/>kosli environment report k8s</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_lambda/>kosli environment report lambda</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_s3/>kosli environment report s3</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_environment_report_server/>kosli environment report server</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_expect_deployment/>kosli expect deployment</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_fingerprint/>kosli fingerprint</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_approval_assert/>kosli pipeline approval assert</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_approval_report/>kosli pipeline approval report</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_approval_request/>kosli pipeline approval request</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_creation/>kosli pipeline artifact report creation</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_evidence_bitbucket-pullrequest/>kosli pipeline artifact report evidence bitbucket-pullrequest</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_evidence_generic/>kosli pipeline artifact report evidence generic</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_evidence_github-pullrequest/>kosli pipeline artifact report evidence github-pullrequest</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_artifact_report_evidence_test/>kosli pipeline artifact report evidence test</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_declare/>kosli pipeline declare</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_inspect/>kosli pipeline inspect</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_pipeline_ls/>kosli pipeline ls</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_status/>kosli status</a></li><li><a href=https://docs.kosli.com/client_reference/kosli_version/>kosli version</a></li></ul></li><li><input type=checkbox id=section-d06928ff9c11121b26f141ced850796c class=toggle>
<label for=section-d06928ff9c11121b26f141ced850796c class="flex justify-between"><a href=https://docs.kosli.com/helm/>Helm</a></label><ul><li><a href=https://docs.kosli.com/helm/helm_chart/>Helm Chart</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Getting started with Kosli</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#getting-started-with-kosli>Getting started with Kosli</a><ul><li></li><li><a href=#record-environment>Record Environment</a></li><li><a href=#connect-the-pipeline>Connect the pipeline</a></li><li><a href=#github-workflow-notes>GitHub workflow notes</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=getting-started-with-kosli>Getting started with Kosli
<a class=anchor href=#getting-started-with-kosli>#</a></h1><p>A typical use of Kosli follows a scenario:</p><ol><li>Record the state of your runtime environments</li><li>Connect the data from you pipelines</li><li>Search in Kosli to get the whole picture</li></ol><p>We'll be using Kosli CLI to run all the commands. You can find installation instruction <a href=/getting_started/installation>here
</a>.</p><p>In the examples below we report k8s type of <a href=/introducing_kosli/environments>environment</a> but the general approach would work for any supported type.</p><h3 id=example-repository>Example repository
<a class=anchor href=#example-repository>#</a></h3><p>If you want to see our workflow examples you can find them at <a href=https://github.com/kosli-dev/github-k8s-demo target=_blank>github-k8s-demo repository</a></p><h2 id=record-environment>Record Environment
<a class=anchor href=#record-environment>#</a></h2><h3 id=create-an-environment-in-kosli>Create an environment in Kosli
<a class=anchor href=#create-an-environment-in-kosli>#</a></h3><p>The first thing we need to do is to create an <strong><a href=/introducing_kosli/environments>environment</a></strong> in <a href=https://app.kosli.com target=_blank>Kosli
</a>.
Kosli <strong>environment</strong> is where you'll be reporting the state of your actual runtime environments (k8s cluster, docker host, AWS lambda, ...), like <em>staging</em> or <em>production</em>.
You can either create an environment with <a href=/introducing_kosli/cli/>Kosli CLI</a> or via the web UI.</p><p>You need a name for your <strong>environment</strong> - it doesn't have to be the same name you use for the actual environment, but it certainly helps to identify it in the future. In this guide we use <strong>github-k8s-test</strong> as the name of the <strong>environment</strong>.
You also need to provide the description of the environment. You'll find this helpful as the number of your environments increases.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kosli env declare <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --name github-k8s-test <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --environment-type K8S <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --description <span style=color:#e6db74>&#34;k8s and github actions demo&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --api-token &lt;your-api-token&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --owner &lt;your-github-username&gt;
</span></span></code></pre></div><h3 id=report-an-environment>Report an environment
<a class=anchor href=#report-an-environment>#</a></h3><p>To record what's running in your k8s cluster you can run the <a href=/client_reference/kosli_environment_report_k8s/>k8s environment report command</a> - manually on any machine that can access your k8s cluster or you can automate the reporting with cron job or using CI tool, e.g. you can use <a href=https://github.com/kosli-dev/github-k8s-demo/blob/main/.github/workflows/report.yml target=_blank>GitHub Actions</a> for that.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kosli environment report k8s github-k8s-test <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --kubeconfig &lt;path to kubeconfig&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --namespace &lt;namespace to report&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --api-token &lt;your-api-token&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --owner &lt;your-github-username&gt;
</span></span></code></pre></div><p>Once the workflow runs successfully, and there is already something running in your environment, you will see the information about it in <strong>github-k8s-test</strong> environment in Kosli (You'll find it under <strong>Environments</strong> section).</p><h2 id=connect-the-pipeline>Connect the pipeline
<a class=anchor href=#connect-the-pipeline>#</a></h2><p>Every time you build an <strong>artifact</strong> you can store (and easily access) all the information you have about it in Kosli.</p><p>Artifacts in Kosli are reported to Kosli <strong><a href=/introducing_kosli/pipelines>pipelines
</a></strong>. You can find the <strong>Pipelines</strong> section just below <strong>Environments</strong> in Kosli.</p><h3 id=create-a-pipeline>Create a pipeline
<a class=anchor href=#create-a-pipeline>#</a></h3><p>To report an <strong>artifact</strong> you need to create a Kosli <strong>pipeline</strong> first. Every time your workflow builds a new version of Docker image it will be reported to the same Kosli <strong>pipeline</strong>.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kosli pipeline declare --description <span style=color:#e6db74>&#34;Kosli server&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --pipeline github-k8s-demo <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --template <span style=color:#e6db74>&#34;artifact&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --api-token &lt;your-api-token&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --owner &lt;your-github-username&gt;
</span></span></code></pre></div><h3 id=report-an-artifact>Report an artifact
<a class=anchor href=#report-an-artifact>#</a></h3><p>To report an artifact use <a href=/client_reference/kosli_pipeline_artifact_report_creation/>kosli pipeline artifact report creation</a> command:</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kosli pipeline artifact report creation &lt;your artifact name&gt; 
</span></span><span style=display:flex><span>    --artifact-type &lt;docker, file or dir&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --api-token &lt;your-api-token&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --owner &lt;your-github-username&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --pipeline github-k8s-demo
</span></span></code></pre></div><p>Typically you'd run that command in your CI system as part of your pipeline, and if you use GitHub Actions or Bitbucket Pipelines a number of required flag would be <a href=/ci-defaults>automatically taken care of
</a>.</p><p>If you want to run the command manually you'd need to provide required flags on your own, so your artifact reporting command would have to be extended by:</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>--build-url &lt;will accept any string&gt; --commit-url &lt;will accept any string&gt; --git-commit &lt;your commit sha&gt;
</span></span></code></pre></div><p>Once the workflow runs successfully, you should see it reported in Kosli <strong>github-k8s-demo pipeline</strong></p><h3 id=report-deployment>Report Deployment
<a class=anchor href=#report-deployment>#</a></h3><p>The missing piece is making sure you know how your artifact ended up in the environment, and that's why, when your workflow deploys to an environment, it should report the deployment to that environment to Kosli.</p><div class="highlight command"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kosli pipeline deployment report &lt;your artifact name&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --sha256 &lt;your artifact fingerprint&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --build-url &lt;deployment build url&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --api-token &lt;your-api-token&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --owner &lt;your-github-username&gt; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --environment &lt;kosli environment to report to&gt;
</span></span></code></pre></div><p>The <a href=https://github.com/kosli-dev/github-k8s-demo/blob/main/.github/workflows/main.yml target=_blank>main.yml</a> workflow in the <a href=https://github.com/kosli-dev/github-k8s-demo target=_blank>github-k8s-demo</a> repository is a complete workflow for reporting an artifact and deployment to Kosli.</p><p>Visit <a href=/client_reference>Kosli Commands</a> section to learn more about available Kosli CLI commands.</p><h2 id=github-workflow-notes>GitHub workflow notes
<a class=anchor href=#github-workflow-notes>#</a></h2><p>In order to reuse our <a href=https://github.com/kosli-dev/github-k8s-demo target=_blank>demo repository</a> you need to have following secrets configured in your CI:</p><ul><li><strong>KOSLI_API_TOKEN</strong> - you can find the Kosli API Token under your profile at <a href=https://app.kosli.com/ target=_blank>https://app.kosli.com/</a> (click on your avatar in the right top corner of the window and select 'Profile')</li><li><strong>GCP_K8S_CREDENTIALS</strong> - service account credentials (.json file), with k8s access permissions</li><li><strong>DOCKERHUB_TOKEN</strong> - your DockerHub Access Token (you can create one at hub.docker.com, under <em>Account Settings</em> > <em>Security</em>)</li></ul><p>There are also a few things you'll need to adjust in the workflows, so it can work for you:</p><ul><li><code>K8S_CLUSTER_NAME</code> and <code>K8S_GCP_ZONE</code> should refer to your cluster setup and <code>NAMESPACE</code> should refer to a namespace you will to deploy your application to</li><li><code>KOSLI_OWNER</code> is your Kosli username (which will be the same as the GitHub account you used to log into Kosli)</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){document.querySelectorAll("div.command").forEach(e=>{let t=document.createElement("div"),n=document.createTextNode("copied!");t.appendChild(n),e.appendChild(t),t.classList.add("copiedText"),e.addEventListener("click",function(){if(navigator.clipboard){let n=e.querySelector("code");navigator.clipboard.writeText(n.innerText),t.classList.add("visible"),setTimeout(()=>{t.classList.remove("visible")},1500)}})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#getting-started-with-kosli>Getting started with Kosli</a><ul><li></li><li><a href=#record-environment>Record Environment</a></li><li><a href=#connect-the-pipeline>Connect the pipeline</a></li><li><a href=#github-workflow-notes>GitHub workflow notes</a></li></ul></li></ul></nav></div></aside></main><div class=top-header><div class="container flex"><div class=docs-logo><a href=/><img src=/kosli-docs-logo-white.svg alt="Kosli docs logo"></a></div><div class=separator></div></div></div></body></html>